<!DOCTYPE html>
{% extends "base.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/files.css') }}">
{% endblock %}

{% block content %}
<br>
<div class="container">
  <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        {% for d in path %}
          <li class="breadcrumb-item"><a href="{{ url_for('files.resource', sub_path=d[1]) }}">{{ d[0] }}</a></li>
        {% endfor %}
          <li class="breadcrumb-item active" aria-current="page">{{ dir }}</li>
      </ol>
  </nav>
  <div class="row justify-content-md-center align-items-center">
    <table class="table table-striped table-borderless">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Modified</th>
          <th scope="col">Size</th>
          <th scope="col"></th>
          <th scope="col"></th>
            <th scope="col"></th>
        </tr>
      </thead>
          {% for file in files %}
          <tr>
            <td class="align-middle">
              {% if file['isDir'] %}
                  <img class="file_icon" src="{{ url_for('static', filename='img/icon_dir.png') }}" alt="Directory">
              {% else %}
                  {% if file['MimeType'] == 'video' %}
                      <img class="file_icon" src="{{ url_for('static', filename='img/video.png') }}" alt="File">
                  {% elif file['MimeType'] == 'audio'%}
                      <img class="file_icon" src="{{ url_for('static', filename='img/audio.png') }}" alt="File">
                  {% elif file['MimeType'] == 'image'%}
                      <img class="file_icon" src="{{ url_for('static', filename='img/audio.png') }}" alt="File">
                  {% else %}
                      <img class="file_icon" src="{{ url_for('static', filename='img/icon_file.png') }}" alt="File">
                  {% endif %}
              {% endif %}
              <a href="{{ url_for('files.resource', sub_path=file['path']) }}">
                  {{ file['name'] }}
              </a>
            </td>
            <td class="align-middle">{{ file['modified'] }}</td>
            <td class="align-middle">{{ file['size'] }}</td>
              <td class="align-middle">{{ file['metric'] }}</td>
            <td align="right">
                {% if 'DELETE' in file['accessType'] %}
                <a href="{{ url_for('files.delete', sub_path=file['path']) }}">
                    <button type="submit" class="btn btn-danger">
                        Delete
                    </button>
                </a>
                {% endif %}
            </td>
            <td align="right">
                <a href="{{ url_for('files.resource', sub_path=file['path']) }}" download>
                    <button type="submit" class="btn btn-primary">
                      Download
                    </button>
                </a>
            </td>
          </tr>
          {% endfor %}
    </table>
  </div>
</div>
{% endblock %}